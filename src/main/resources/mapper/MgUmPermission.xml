<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mogui.mall.happymall.mapper.MgUmPermissionMapper">
    <select id="selectPermissionListByUserId" resultType="com.mogui.mall.happymall.pojo.MgUmPermission">
       SELECT
            mp.id,
            mp.pid,
            mp.name,
            mp.value,
            mp.type,
            mp.sort,
            mp.uri
        from mg_um_user_role_relation rr
        LEFT JOIN mg_um_role mr on mr.id = rr.role_id
        LEFT JOIN mg_um_role_permission_relation pr on mr.id = pr.role_id
        LEFT JOIN mg_um_permission mp on pr.permission_id = mp.id
        where rr.user_id = #{userId}
    </select>
</mapper>